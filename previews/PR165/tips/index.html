<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Tips · MeshIntegrals.jl</title><meta name="title" content="Tips · MeshIntegrals.jl"/><meta property="og:title" content="Tips · MeshIntegrals.jl"/><meta property="twitter:title" content="Tips · MeshIntegrals.jl"/><meta name="description" content="Documentation for MeshIntegrals.jl."/><meta property="og:description" content="Documentation for MeshIntegrals.jl."/><meta property="twitter:description" content="Documentation for MeshIntegrals.jl."/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">MeshIntegrals.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><span class="tocitem">Home</span><ul><li><a class="tocitem" href="../">About</a></li><li><a class="tocitem" href="../tutorial/">Tutorial</a></li><li><a class="tocitem" href="../integration_rules/">Integration Rules</a></li><li><a class="tocitem" href="../support/">Support Status</a></li><li class="is-active"><a class="tocitem" href>Tips</a><ul class="internal"><li><a class="tocitem" href="#Performance"><span>Performance</span></a></li></ul></li></ul></li><li><span class="tocitem">Developer Notes</span><ul><li><a class="tocitem" href="../developer/CHANGELOG/">Changelog</a></li><li><a class="tocitem" href="../developer/how_it_works/">How it Works</a></li><li><a class="tocitem" href="../developer/specializations/">Specializations</a></li></ul></li><li><a class="tocitem" href="../api/">Public API</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Home</a></li><li class="is-active"><a href>Tips</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Tips</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/JuliaGeometry/MeshIntegrals.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/JuliaGeometry/MeshIntegrals.jl/blob/main/docs/src/tips.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Tips"><a class="docs-heading-anchor" href="#Tips">Tips</a><a id="Tips-1"></a><a class="docs-heading-anchor-permalink" href="#Tips" title="Permalink"></a></h1><h2 id="Performance"><a class="docs-heading-anchor" href="#Performance">Performance</a><a id="Performance-1"></a><a class="docs-heading-anchor-permalink" href="#Performance" title="Permalink"></a></h2><h3 id="Use-an-atol-setting-for-integrals-with-near-zero-solutions"><a class="docs-heading-anchor" href="#Use-an-atol-setting-for-integrals-with-near-zero-solutions">Use an <code>atol</code> setting for integrals with near-zero solutions</a><a id="Use-an-atol-setting-for-integrals-with-near-zero-solutions-1"></a><a class="docs-heading-anchor-permalink" href="#Use-an-atol-setting-for-integrals-with-near-zero-solutions" title="Permalink"></a></h3><p>By default, the solvers used for <code>GaussKronrod</code> and <code>HAdaptiveCuabture</code> integration use a relative tolerance (<code>rtol</code>) setting to determine when a solution is sufficiently accurate. For integrals whose true solution equal exactly or very nearly zero, the solver can struggle to meet this relative error tolerance and significantly lengthen compute times. In such a case, performance can often be improved by explicitly providing an absolute tolerance setting (<code>atol</code>).</p><p>This can be observed by benchmarking the integration of an integral problem whose true solution is exactly zero.</p><p class="math-container">\[\int_{-1\text{m}}^{1\text{m}} x \left[\tfrac{\text{N}}{\text{m}}\right] ~ \text{d}x
= 0 \,\text{Nm}\]</p><pre><code class="language-julia hljs">julia&gt; using BenchmarkTools, Meshes, MeshIntegrals, Unitful

julia&gt; segment = Segment(Point(-1u&quot;m&quot;), Point(1u&quot;m&quot;))
Segment
├─ Point(x: -1.0 m)
└─ Point(x: 1.0 m)

julia&gt; f(p::Meshes.Point) = p.coords.x * u&quot;N/m&quot;
f (generic function with 1 method)</code></pre><p>Calculating this problem with a default <code>GaussKronrod()</code> rule produces a solution that is very close to zero, on the order of <span>$10^{-11}$</span>. However, the result took a non-trivial amount of time due to a large number of memory allocatons for such a trivial problem.</p><pre><code class="language-julia hljs">julia&gt; @btime integral(f, segment, GaussKronrod())
  154.285 ms (28 allocations: 33.70 MiB)
2.3298940582252377e-11 m N</code></pre><p>Providing an explicit <code>atol</code> setting produces a solution that happens to be just as accurate but returns much faster.</p><pre><code class="language-julia hljs">julia&gt; @btime integral(f, segment, GaussKronrod(atol = 1e-8u&quot;N*m&quot;))
  846.377 ns (9 allocations: 208 bytes)
1.1316035800104648e-11 m N</code></pre></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../support/">« Support Status</a><a class="docs-footer-nextpage" href="../developer/CHANGELOG/">Changelog »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.8.0 on <span class="colophon-date" title="Sunday 12 January 2025 22:15">Sunday 12 January 2025</span>. Using Julia version 1.9.4.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
